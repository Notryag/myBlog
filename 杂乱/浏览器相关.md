
### 浏览器进程

1. 浏览器主进程
2. 第三方插件进程
3. 渲染进程
	+ GUI渲染线程
	+ js引擎线程
	+ 事间触发线程
	+ 定时器线程
	+ http请求线程
4. GPU进程
5. 网络进程

CSRF攻击攻击原理及过程如下：

1. 用户C打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A；

2.在用户信息通过验证后，网站A产生Cookie信息并返回给浏览器，此时用户登录网站A成功，可以正常发送请求到网站A；

3. 用户未退出网站A之前，在同一浏览器中，打开一个TAB页访问网站B；

4. 网站B接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点A；
防范:在 HTTP 头中自定义属性并验证,添加csrftoken 这个http请求头属性


### 跨标签页通讯
不同标签页间的通讯，本质原理就是去运用一些可以 共享的中间介质，因此比较常用的有以下方法:

+ 通过父页面window.open()和子页面postMessage  window.onmessage
	- 异步下，通过 window.open('about: blank') 和 tab.location.href = '*'
+ 设置同域下共享的localStorage与监听window.onstorage
	- 重复写入相同的值无法触发	
	- 会受到浏览器隐身模式等的限制
+ 设置共享cookie与不断轮询脏检查(setInterval)
+ 借助服务端或者中间层实现


## 浏览器渲染原理及流程

1. DOM Tree：浏览器将HTML解析成树形的数据结构。

2. CSS Rule Tree：浏览器将CSS解析成树形的数据结构。

3. Render Tree: DOM和CSSOM合并后生成Render Tree。

4. Layout/reflow (回流):根据生成的渲染树，进行回流(Layout)，得到节点的几何信息（位置，大小）

5. Painting(重绘):根据渲染树以及回流得到的几何信息，得到节点的绝对像素

6. Display:将像素发送给GPU，展示在页面上。

reflow（回流）：当浏览器发现某个部分发生了点变化影响了布局，需要倒回去重新渲染，内行称这个回退的过程叫 reflow。reflow 会从 <html> 这个 root frame 开始递归往下，依次计算所有的结点几何尺寸和位置。reflow 几乎是无法避免的。现在界面上流行的一些效果，比如树状目录的折叠、展开（实质上是元素的显 示与隐藏）等，都将引起浏览器的 reflow。鼠标滑过、点击……只要这些行为引起了页面上某些元素的占位面积、定位方式、边距等属性的变化，都会引起它内部、周围甚至整个页面的重新渲 染。通常我们都无法预估浏览器到底会 reflow 哪一部分的代码，它们都彼此相互影响着。

repaint（重绘）：改变某个元素的背景色、文字颜色、边框颜色等等不影响它周围或内部布局的属性时，屏幕的一部分要重画，但是元素的几何尺寸没有变。